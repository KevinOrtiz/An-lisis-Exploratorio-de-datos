mapPoints =  ggplot(data=smaller_sample, aes(x=x, y=y), color = cluster)
mapPoints
require(ggplot2)
require(ggmap)
require(rworldmap)
NUM_CLUSTERS = 15
geo_data <- data.frame(x=coordenadas_lugares_co$Lat, y=coordenadas_lugares_co$Lon)
geo_data_no_na <- na.omit(geo_data)
valid_rows <- strtoi(rownames(geo_data_no_na))
model <- kmeans(geo_data_no_na, NUM_CLUSTERS)
data_with_clusters <- data.frame(geo_data_no_na, cluster = factor(model$cluster))
centers <- as.data.frame(model$centers)
smaller_sample <- data_with_clusters[sample(nrow(data_with_clusters), 700, replace=F),]
map = get_map(location = c(lon = -78.4558138,lat =  -0.2324668), zoom = 11, maptype = 'satellite')
mapPoints =  ggplot(data=smaller_sample, aes(x=x, y=y), color = cluster) + geom_point()
mapPoints
View(smaller_sample)
view(cluster)
View(cluster)
View(smaller_sample$cluster)
View(smaller_sample)
require(ggplot2)
require(ggmap)
require(rworldmap)
NUM_CLUSTERS = 15
geo_data <- data.frame(x=coordenadas_lugares_co$Lat, y=coordenadas_lugares_co$Lon)
geo_data_no_na <- na.omit(geo_data)
valid_rows <- strtoi(rownames(geo_data_no_na))
model <- kmeans(geo_data_no_na, NUM_CLUSTERS)
data_with_clusters <- data.frame(geo_data_no_na, cluster = factor(model$cluster))
centers <- as.data.frame(model$centers)
smaller_sample <- data_with_clusters[sample(nrow(data_with_clusters), 700, replace=F),]
map = get_map(location = c(lon = -78.4558138,lat =  -0.2324668), zoom = 11, maptype = 'satellite')
mapPoints =  ggplot(data=smaller_sample, aes(x=x, y=y), color = smaller_sample$cluster) + geom_point()
mapPoints
require(ggplot2)
require(ggmap)
require(rworldmap)
NUM_CLUSTERS = 15
geo_data <- data.frame(x=coordenadas_lugares_co$Lat, y=coordenadas_lugares_co$Lon)
geo_data_no_na <- na.omit(geo_data)
valid_rows <- strtoi(rownames(geo_data_no_na))
model <- kmeans(geo_data_no_na, NUM_CLUSTERS)
data_with_clusters <- data.frame(geo_data_no_na, cluster = factor(model$cluster))
centers <- as.data.frame(model$centers)
smaller_sample <- data_with_clusters[sample(nrow(data_with_clusters), 700, replace=F),]
map = get_map(location = c(lon = -78.4558138,lat =  -0.2324668), zoom = 11, maptype = 'satellite')
ggplot(data=smaller_sample, aes(x=x, y=y, color=cluster )) + geom_point() +  geom_point(data=centers, aes(x=x,y=y, color='Center'))
mapPoints
require(ggplot2)
require(ggmap)
require(rworldmap)
NUM_CLUSTERS = 20
geo_data <- data.frame(x=coordenadas_lugares_co$Lat, y=coordenadas_lugares_co$Lon)
geo_data_no_na <- na.omit(geo_data)
valid_rows <- strtoi(rownames(geo_data_no_na))
model <- kmeans(geo_data_no_na, NUM_CLUSTERS)
data_with_clusters <- data.frame(geo_data_no_na, cluster = factor(model$cluster))
centers <- as.data.frame(model$centers)
smaller_sample <- data_with_clusters[sample(nrow(data_with_clusters), 700, replace=F),]
map = get_map(location = c(lon = -78.4558138,lat =  -0.2324668), zoom = 11, maptype = 'satellite')
ggplot(data=smaller_sample, aes(x=x, y=y, color=cluster )) + geom_point() +  geom_point(data=centers, aes(x=x,y=y, color='Center'))
mapPoints
require(ggplot2)
require(ggmap)
require(rworldmap)
NUM_CLUSTERS = 20
geo_data <- data.frame(x=coordenadas_lugares_co$Lat, y=coordenadas_lugares_co$Lon)
geo_data_no_na <- na.omit(geo_data)
valid_rows <- strtoi(rownames(geo_data_no_na))
model <- kmeans(geo_data_no_na, NUM_CLUSTERS)
data_with_clusters <- data.frame(geo_data_no_na, cluster = factor(model$cluster))
centers <- as.data.frame(model$centers)
smaller_sample <- data_with_clusters[sample(nrow(data_with_clusters), 700, replace=F),]
map = get_map(location = c(lon = -78.4558138,lat =  -0.2324668), zoom = 11, maptype = 'satellite')
ggplot(data=smaller_sample, aes(x=x, y=y, color=cluster )) + geom_point() +  geom_point(data=centers, aes(x=x,y=y, color='red'))
mapPoints
require(ggplot2)
require(ggmap)
require(rworldmap)
NUM_CLUSTERS = 20
geo_data <- data.frame(x=coordenadas_lugares_co$Lat, y=coordenadas_lugares_co$Lon)
geo_data_no_na <- na.omit(geo_data)
valid_rows <- strtoi(rownames(geo_data_no_na))
model <- kmeans(geo_data_no_na, NUM_CLUSTERS)
data_with_clusters <- data.frame(geo_data_no_na, cluster = factor(model$cluster))
centers <- as.data.frame(model$centers)
smaller_sample <- data_with_clusters[sample(nrow(data_with_clusters), 700, replace=F),]
map = get_map(location = c(lon = -78.4558138,lat =  -0.2324668), zoom = 11, maptype = 'satellite')
ggplot(data=smaller_sample, aes(x=x, y=y, color=cluster )) + geom_point() +  geom_point(data=centers, aes(x=x,y=y, color='red'))
require(ggplot2)
require(ggmap)
require(rworldmap)
NUM_CLUSTERS = 20
geo_data <- data.frame(x=coordenadas_lugares_co$Lat, y=coordenadas_lugares_co$Lon)
geo_data_no_na <- na.omit(geo_data)
valid_rows <- strtoi(rownames(geo_data_no_na))
model <- kmeans(geo_data_no_na, NUM_CLUSTERS)
data_with_clusters <- data.frame(geo_data_no_na, cluster = factor(model$cluster))
centers <- as.data.frame(model$centers)
smaller_sample <- data_with_clusters[sample(nrow(data_with_clusters), 700, replace=F),]
map = get_map(location = c(lon = -78.4558138,lat =  -0.2324668), zoom = 11, maptype = 'satellite')
ggmap(map) + ggplot(data=smaller_sample, aes(x=x, y=y, color=cluster )) + geom_point() +  geom_point(data=centers, aes(x=x,y=y, color='red'))
require(ggplot2)
require(ggmap)
require(rworldmap)
NUM_CLUSTERS = 20
geo_data <- data.frame(x=coordenadas_lugares_co$Lat, y=coordenadas_lugares_co$Lon)
geo_data_no_na <- na.omit(geo_data)
valid_rows <- strtoi(rownames(geo_data_no_na))
model <- kmeans(geo_data_no_na, NUM_CLUSTERS)
data_with_clusters <- data.frame(geo_data_no_na, cluster = factor(model$cluster))
centers <- as.data.frame(model$centers)
smaller_sample <- data_with_clusters[sample(nrow(data_with_clusters), 700, replace=F),]
map = get_map(location = c(lon = -78.4558138,lat =  -0.2324668), zoom = 11, maptype = 'satellite')
ggmap(map) + geom_point(data=smaller_sample, aes(x=x, y=y, color=cluster )) +   geom_point(data=centers, aes(x=x,y=y, color='red'))
require(ggplot2)
require(ggmap)
require(rworldmap)
NUM_CLUSTERS = 20
geo_data <- data.frame(x=coordenadas_lugares_co$Lon, y=coordenadas_lugares_co$Lat)
geo_data_no_na <- na.omit(geo_data)
valid_rows <- strtoi(rownames(geo_data_no_na))
model <- kmeans(geo_data_no_na, NUM_CLUSTERS)
data_with_clusters <- data.frame(geo_data_no_na, cluster = factor(model$cluster))
centers <- as.data.frame(model$centers)
smaller_sample <- data_with_clusters[sample(nrow(data_with_clusters), 700, replace=F),]
map = get_map(location = c(lon = -78.4558138,lat =  -0.2324668), zoom = 11, maptype = 'satellite')
ggplot(data=smaller_sample, aes(x=x, y=y, color=cluster )) + geom_point() +  geom_point(data=centers, aes(x=x,y=y, color='red'))
require(ggplot2)
require(ggmap)
require(rworldmap)
NUM_CLUSTERS = 20
geo_data <- data.frame(x=coordenadas_lugares_co$Lon, y=coordenadas_lugares_co$Lat)
geo_data_no_na <- na.omit(geo_data)
valid_rows <- strtoi(rownames(geo_data_no_na))
model <- kmeans(geo_data_no_na, NUM_CLUSTERS)
data_with_clusters <- data.frame(geo_data_no_na, cluster = factor(model$cluster))
centers <- as.data.frame(model$centers)
smaller_sample <- data_with_clusters[sample(nrow(data_with_clusters), 700, replace=F),]
map = get_map(location = c(lon = -78.4558138,lat =  -0.2324668), zoom = 11, maptype = 'satellite')
ggmap(map) + ggplot(data=smaller_sample, aes(x=x, y=y, color=cluster )) + geom_point() +  geom_point(data=centers, aes(x=x,y=y, color='red'))
require(ggplot2)
require(ggmap)
require(rworldmap)
NUM_CLUSTERS = 20
geo_data <- data.frame(x=coordenadas_lugares_co$Lon, y=coordenadas_lugares_co$Lat)
geo_data_no_na <- na.omit(geo_data)
valid_rows <- strtoi(rownames(geo_data_no_na))
model <- kmeans(geo_data_no_na, NUM_CLUSTERS)
data_with_clusters <- data.frame(geo_data_no_na, cluster = factor(model$cluster))
centers <- as.data.frame(model$centers)
smaller_sample <- data_with_clusters[sample(nrow(data_with_clusters), 700, replace=F),]
map = get_map(location = c(lon = -78.4558138,lat =  -0.2324668), zoom = 11, maptype = 'satellite')
ggmap(map) + geom_point(data=smaller_sample, aes(x=x, y=y, color=cluster )) + geom_point()
info = merge(coordenadas_lugares_co, smaller_sample, by.x = 'Lon', by.y = 'x' )
View(geo_data_no_na)
info = merge(coordenadas_lugares_co, smaller_sample, by=c('lon', 'x'))
info = merge(coordenadas_lugares_co, smaller_sample, by=c("lon", "x"))
info = merge(coordenadas_lugares_co, smaller_sample, by=c("Lon", "x"))
info = merge(coordenadas_lugares_co, smaller_sample, by.x = "Lon", by.y = "x")
View(info)
info = merge(coordenadas_lugares_co, smaller_sample, by.x = "Lat", by.y = "y")
View(info)
require(sqldf)
install.packages("sqldf")
require(sqldf)
install.packages("sqldf")
require(sqldf)
info = sqldf("SELECT * FROM smaller_sample, coordenadas_lugar_co WHERE smaller_sample.x = coordenadas_lugar_co.Lon AND smaller_sample.y = coordenadas_lugar_co.Lat")
info = sqldf("SELECT * FROM smaller_sample, coordenadas_lugares_co WHERE smaller_sample.x = coordenadas_lugares_co.Lon AND smaller_sample.y = coordenadas_lugares_co.Lat")
View(info)
info = sqldf("SELECT DISTINC * FROM smaller_sample, coordenadas_lugares_co WHERE smaller_sample.x = coordenadas_lugares_co.Lon AND smaller_sample.y = coordenadas_lugares_co.Lat")
info = sqldf("SELECT DISTINCT * FROM smaller_sample, coordenadas_lugares_co WHERE smaller_sample.x = coordenadas_lugares_co.Lon AND smaller_sample.y = coordenadas_lugares_co.Lat")
View(info)
result = sqldf("SELECT cluster, SUM(NoComments) FROM info GROUP BY cluster ")
View(result)
result = sqldf("SELECT cluster, SUM(NoComments) FROM info GROUP BY cluster ORDER BY SUM(NoComments) DESC")
write.csv
write.csv(file = "info", x = info)
write.csv(file = "info.csv", x = info)
write.csv(file = "clusters.csv", x = result)
write.csv(file = "centers.csv", x = centers)
coordenadas_lugares_com <- read.csv("~/GitHub/An-lisis-Exploratorio-de-datos/k-means/clustering/data/articulo/com/coordenadas_lugares_com.csv")
View(coordenadas_lugares_com)
require(ggplot2)
require(ggmap)
require(rworldmap)
NUM_CLUSTERS = 20
geo_data <- data.frame(x=coordenadas_lugares_com$Lon, y=coordenadas_lugares_com$Lat)
geo_data_no_na <- na.omit(geo_data)
valid_rows <- strtoi(rownames(geo_data_no_na))
model <- kmeans(geo_data_no_na, NUM_CLUSTERS)
data_with_clusters <- data.frame(geo_data_no_na, cluster = factor(model$cluster))
centers <- as.data.frame(model$centers)
smaller_sample <- data_with_clusters[sample(nrow(data_with_clusters), 700, replace=F),]
map = get_map(location = c(lon = -78.4558138,lat =  -0.2324668), zoom = 11, maptype = 'satellite')
ggmap(map) + geom_point(data=smaller_sample, aes(x=x, y=y, color=cluster )) + geom_point()
require(sqldf)
info = sqldf("SELECT DISTINCT * FROM smaller_sample, coordenadas_lugares_com WHERE smaller_sample.x = coordenadas_lugares_com.Lon AND smaller_sample.y = coordenadas_lugares_com.Lat")
result = sqldf("SELECT cluster, SUM(NoComments) FROM info GROUP BY cluster ORDER BY SUM(NoComments) DESC")
write.csv(file = "info_com.csv", x = info)
write.csv(file = "clusters_com.csv", x = result)
write.csv(file = "centers_com.csv", x = centers)
require(ggplot2)
require(ggmap)
require(rworldmap)
NUM_CLUSTERS = 20
geo_data <- data.frame(x=coordenadas_lugares_com$Lon, y=coordenadas_lugares_com$Lat)
geo_data_no_na <- na.omit(geo_data)
valid_rows <- strtoi(rownames(geo_data_no_na))
model <- kmeans(geo_data_no_na, NUM_CLUSTERS)
data_with_clusters <- data.frame(geo_data_no_na, cluster = factor(model$cluster))
centers <- as.data.frame(model$centers)
smaller_sample <- data_with_clusters[sample(nrow(data_with_clusters), 700, replace=F),]
map = get_map(location = c(lon = -78.4558138,lat =  -0.2324668), zoom = 11, maptype = 'satellite')
ggmap(map) + geom_point(data=smaller_sample, aes(x=x, y=y, color=cluster )) + geom_point()
require(sqldf)
info = sqldf("SELECT DISTINCT * FROM smaller_sample, coordenadas_lugares_com WHERE smaller_sample.x = coordenadas_lugares_com.Lon AND smaller_sample.y = coordenadas_lugares_com.Lat")
result = sqldf("SELECT cluster, SUM(NoComments) FROM info GROUP BY cluster ORDER BY SUM(NoComments) DESC")
write.csv(file = "info_com.csv", x = info)
write.csv(file = "clusters_com.csv", x = result)
write.csv(file = "centers_com.csv", x = centers)
require(ggplot2)
require(ggmap)
require(rworldmap)
NUM_CLUSTERS = 20
geo_data <- data.frame(x=coordenadas_lugares_co$Lon, y=coordenadas_lugares_co$Lat)
geo_data_no_na <- na.omit(geo_data)
valid_rows <- strtoi(rownames(geo_data_no_na))
model <- kmeans(geo_data_no_na, NUM_CLUSTERS)
data_with_clusters <- data.frame(geo_data_no_na, cluster = factor(model$cluster))
centers <- as.data.frame(model$centers)
smaller_sample <- data_with_clusters[sample(nrow(data_with_clusters), 700, replace=F),]
map = get_map(location = c(lon = -78.4558138,lat =  -0.2324668), zoom = 11, maptype = 'satellite')
ggmap(map) + geom_point(data=smaller_sample, aes(x=x, y=y, color=cluster )) + geom_point()
require(sqldf)
info = sqldf("SELECT DISTINCT * FROM smaller_sample, coordenadas_lugares_co WHERE smaller_sample.x = coordenadas_lugares_co.Lon AND smaller_sample.y = coordenadas_lugares_co.Lat")
result = sqldf("SELECT cluster, SUM(NoComments) FROM info GROUP BY cluster ORDER BY SUM(NoComments) DESC")
write.csv(file = "info.csv", x = info)
write.csv(file = "clusters.csv", x = result)
write.csv(file = "centers.csv", x = centers)
tweets_depurated_noText <- read.csv("~/GitHub/An-lisis-Exploratorio-de-datos/k-means/clustering/data/tweets_depurated_noText.csv")
View(tweets_depurated_noText)
require(ggplot2)
require(ggmap)
require(rworldmap)
NUM_CLUSTERS = 20
geo_data <- data.frame(x=tweets_depurated_noText$longitude, y=tweets_depurated_noText$latitude)
geo_data_no_na <- na.omit(geo_data)
valid_rows <- strtoi(rownames(geo_data_no_na))
model <- kmeans(geo_data_no_na, NUM_CLUSTERS)
data_with_clusters <- data.frame(geo_data_no_na, cluster = factor(model$cluster))
centers <- as.data.frame(model$centers)
smaller_sample <- data_with_clusters[sample(nrow(data_with_clusters), 700, replace=F),]
map = get_map(location = c(lon = -78.4558138,lat =  -0.2324668), zoom = 11, maptype = 'satellite')
ggmap(map) + geom_point(data=smaller_sample, aes(x=x, y=y, color=cluster )) + geom_point()
require(sqldf)
info = sqldf("SELECT DISTINCT * FROM smaller_sample, tweets_depurated_noText WHERE smaller_sample.x = tweets_depurated_noText.longitude AND smaller_sample.y = tweets_depurated_noText.latitude")
result = sqldf("SELECT cluster, SUM(NoComments) FROM info GROUP BY cluster ORDER BY SUM(NoComments) DESC")
write.csv(file = "info_tweet.csv", x = info)
write.csv(file = "clusters_tweet.csv", x = result)
write.csv(file = "centers_tweet.csv", x = centers)
require(ggplot2)
require(ggmap)
require(rworldmap)
NUM_CLUSTERS = 20
geo_data <- data.frame(x=coordenadas_lugares_co$Lon, y=coordenadas_lugares_co$Lat)
geo_data_no_na <- na.omit(geo_data)
valid_rows <- strtoi(rownames(geo_data_no_na))
model <- kmeans(geo_data_no_na, NUM_CLUSTERS)
data_with_clusters <- data.frame(geo_data_no_na, cluster = factor(model$cluster))
centers <- as.data.frame(model$centers)
smaller_sample <- data_with_clusters[sample(nrow(data_with_clusters), 6000, replace=F),]
map = get_map(location = c(lon = -78.4558138,lat =  -0.2324668), zoom = 11, maptype = 'satellite')
ggmap(map) + geom_point(data=smaller_sample, aes(x=x, y=y, color=cluster )) + geom_point()
require(sqldf)
info = sqldf("SELECT DISTINCT * FROM smaller_sample, coordenadas_lugares_co WHERE smaller_sample.x = coordenadas_lugares_co.Lon AND smaller_sample.y = coordenadas_lugares_co.Lat")
result = sqldf("SELECT cluster, SUM(NoComments) FROM info GROUP BY cluster ORDER BY SUM(NoComments) DESC")
write.csv(file = "info.csv", x = info)
write.csv(file = "clusters.csv", x = result)
write.csv(file = "centers.csv", x = centers)
require(ggplot2)
require(ggmap)
require(rworldmap)
NUM_CLUSTERS = 20
geo_data <- data.frame(x=tweets_depurated_noText$longitude, y=tweets_depurated_noText$latitude)
geo_data_no_na <- na.omit(geo_data)
valid_rows <- strtoi(rownames(geo_data_no_na))
model <- kmeans(geo_data_no_na, NUM_CLUSTERS)
data_with_clusters <- data.frame(geo_data_no_na, cluster = factor(model$cluster))
centers <- as.data.frame(model$centers)
smaller_sample <- data_with_clusters[sample(nrow(data_with_clusters), 600, replace=F),]
map = get_map(location = c(lon = -78.4558138,lat =  -0.2324668), zoom = 11, maptype = 'satellite')
require(ggplot2)
require(ggmap)
require(rworldmap)
NUM_CLUSTERS = 20
geo_data <- data.frame(x=tweets_depurated_noText$longitude, y=tweets_depurated_noText$latitude)
geo_data_no_na <- na.omit(geo_data)
valid_rows <- strtoi(rownames(geo_data_no_na))
model <- kmeans(geo_data_no_na, NUM_CLUSTERS)
data_with_clusters <- data.frame(geo_data_no_na, cluster = factor(model$cluster))
centers <- as.data.frame(model$centers)
smaller_sample <- data_with_clusters[sample(nrow(data_with_clusters), 6000, replace=F),]
map = get_map(location = c(lon = -78.4558138,lat =  -0.2324668), zoom = 11, maptype = 'satellite')
ggmap(map) + geom_point(data=smaller_sample, aes(x=x, y=y, color=cluster )) + geom_point()
require(sqldf)
info = sqldf("SELECT DISTINCT * FROM smaller_sample, tweets_depurated_noText WHERE smaller_sample.x = tweets_depurated_noText.longitude AND smaller_sample.y = tweets_depurated_noText.latitude")
result = sqldf("SELECT cluster, SUM(NoComments) FROM info GROUP BY cluster ORDER BY SUM(NoComments) DESC")
write.csv(file = "info_tweet.csv", x = info)
write.csv(file = "clusters_tweet.csv", x = result)
write.csv(file = "centers_tweet.csv", x = centers)
require(ggplot2)
require(ggmap)
require(rworldmap)
NUM_CLUSTERS = 20
geo_data <- data.frame(x=tweets_depurated_noText$longitude, y=tweets_depurated_noText$latitude)
geo_data_no_na <- na.omit(geo_data)
valid_rows <- strtoi(rownames(geo_data_no_na))
model <- kmeans(geo_data_no_na, NUM_CLUSTERS)
data_with_clusters <- data.frame(geo_data_no_na, cluster = factor(model$cluster))
centers <- as.data.frame(model$centers)
smaller_sample <- data_with_clusters[sample(nrow(data_with_clusters), 6000, replace=F),]
map = get_map(location = c(lon = -78.4558138,lat =  -0.2324668), zoom = 11, maptype = 'satellite')
ggmap(map) + geom_point(data=smaller_sample, aes(x=x, y=y, color=cluster )) + geom_point()
require(sqldf)
info = sqldf("SELECT DISTINCT * FROM smaller_sample, tweets_depurated_noText WHERE smaller_sample.x = tweets_depurated_noText.longitude AND smaller_sample.y = tweets_depurated_noText.latitude")
result = sqldf("SELECT cluster, SUM(NoComments) FROM info GROUP BY cluster ORDER BY SUM(NoComments) DESC")
write.csv(file = "info_tweet.csv", x = info)
write.csv(file = "clusters_tweet.csv", x = result)
write.csv(file = "centers_tweet.csv", x = centers)
require(ggplot2)
require(ggmap)
require(rworldmap)
NUM_CLUSTERS = 20
geo_data <- data.frame(x=tweets_depurated_noText$longitude, y=tweets_depurated_noText$latitude)
geo_data_no_na <- na.omit(geo_data)
valid_rows <- strtoi(rownames(geo_data_no_na))
model <- kmeans(geo_data_no_na, NUM_CLUSTERS)
data_with_clusters <- data.frame(geo_data_no_na, cluster = factor(model$cluster))
centers <- as.data.frame(model$centers)
smaller_sample <- data_with_clusters[sample(nrow(data_with_clusters), 5000, replace=F),]
map = get_map(location = c(lon = -78.4558138,lat =  -0.2324668), zoom = 11, maptype = 'satellite')
ggmap(map) + geom_point(data=smaller_sample, aes(x=x, y=y, color=cluster )) + geom_point()
require(sqldf)
info = sqldf("SELECT DISTINCT * FROM smaller_sample, tweets_depurated_noText WHERE smaller_sample.x = tweets_depurated_noText.longitude AND smaller_sample.y = tweets_depurated_noText.latitude")
result = sqldf("SELECT cluster, SUM(NoComments) FROM info GROUP BY cluster ORDER BY SUM(NoComments) DESC")
write.csv(file = "info_tweet.csv", x = info)
write.csv(file = "clusters_tweet.csv", x = result)
write.csv(file = "centers_tweet.csv", x = centers)
require(ggplot2)
require(ggmap)
require(rworldmap)
NUM_CLUSTERS = 20
geo_data <- data.frame(x=tweets_depurated_noText$longitude, y=tweets_depurated_noText$latitude)
geo_data_no_na <- na.omit(geo_data)
valid_rows <- strtoi(rownames(geo_data_no_na))
model <- kmeans(geo_data_no_na, NUM_CLUSTERS)
data_with_clusters <- data.frame(geo_data_no_na, cluster = factor(model$cluster))
centers <- as.data.frame(model$centers)
smaller_sample <- data_with_clusters[sample(nrow(data_with_clusters), 2500, replace=F),]
map = get_map(location = c(lon = -78.4558138,lat =  -0.2324668), zoom = 11, maptype = 'satellite')
ggmap(map) + geom_point(data=smaller_sample, aes(x=x, y=y, color=cluster )) + geom_point()
require(sqldf)
info = sqldf("SELECT DISTINCT * FROM smaller_sample, tweets_depurated_noText WHERE smaller_sample.x = tweets_depurated_noText.longitude AND smaller_sample.y = tweets_depurated_noText.latitude")
result = sqldf("SELECT cluster, SUM(NoComments) FROM info GROUP BY cluster ORDER BY SUM(NoComments) DESC")
write.csv(file = "info_tweet.csv", x = info)
write.csv(file = "clusters_tweet.csv", x = result)
write.csv(file = "centers_tweet.csv", x = centers)
View(tweets_depurated_noText)
require(ggplot2)
require(ggmap)
require(rworldmap)
NUM_CLUSTERS = 20
geo_data <- data.frame(x=tweets_depurated_noText$longitude, y=tweets_depurated_noText$latitude)
geo_data_no_na <- na.omit(geo_data)
valid_rows <- strtoi(rownames(geo_data_no_na))
model <- kmeans(geo_data_no_na, NUM_CLUSTERS)
data_with_clusters <- data.frame(geo_data_no_na, cluster = factor(model$cluster))
centers <- as.data.frame(model$centers)
smaller_sample <- data_with_clusters[sample(nrow(data_with_clusters), 2500, replace=F),]
map = get_map(location = c(lon = -78.4558138,lat =  -0.2324668), zoom = 11, maptype = 'satellite')
ggmap(map) + geom_point(data=smaller_sample, aes(x=x, y=y, color=cluster )) + geom_point()
require(sqldf)
info = sqldf("SELECT DISTINCT * FROM smaller_sample, tweets_depurated_noText WHERE smaller_sample.x = tweets_depurated_noText.longitude AND smaller_sample.y = tweets_depurated_noText.latitude")
result = sqldf("SELECT cluster, SUM(cluster) FROM info GROUP BY cluster ORDER BY SUM(cluster) DESC")
write.csv(file = "info_tweet.csv", x = info)
write.csv(file = "clusters_tweet.csv", x = result)
write.csv(file = "centers_tweet.csv", x = centers)
clusters_tweet <- read.csv("~/GitHub/An-lisis-Exploratorio-de-datos/k-means/clustering/clusters_tweet.csv")
View(clusters_tweet)
View(info)
require(ggplot2)
require(ggmap)
require(rworldmap)
NUM_CLUSTERS = 20
geo_data <- data.frame(x=tweets_depurated_noText$longitude, y=tweets_depurated_noText$latitude)
geo_data_no_na <- na.omit(geo_data)
valid_rows <- strtoi(rownames(geo_data_no_na))
model <- kmeans(geo_data_no_na, NUM_CLUSTERS)
data_with_clusters <- data.frame(geo_data_no_na, cluster = factor(model$cluster))
centers <- as.data.frame(model$centers)
smaller_sample <- data_with_clusters[sample(nrow(data_with_clusters), 2500, replace=F),]
map = get_map(location = c(lon = -78.4558138,lat =  -0.2324668), zoom = 11, maptype = 'satellite')
ggmap(map) + geom_point(data=smaller_sample, aes(x=x, y=y, color=cluster )) + geom_point()
require(sqldf)
info = sqldf("SELECT * FROM smaller_sample, tweets_depurated_noText WHERE smaller_sample.y = tweets_depurated_noText.longitude AND smaller_sample.x = tweets_depurated_noText.latitude")
result = sqldf("SELECT cluster, SUM(cluster) FROM info GROUP BY cluster ORDER BY SUM(cluster) DESC")
write.csv(file = "info_tweet.csv", x = info)
write.csv(file = "clusters_tweet.csv", x = result)
write.csv(file = "centers_tweet.csv", x = centers)
require(ggplot2)
require(ggmap)
require(rworldmap)
NUM_CLUSTERS = 20
geo_data <- data.frame(x=tweets_depurated_noText$longitude, y=tweets_depurated_noText$id_str)
geo_data_no_na <- na.omit(geo_data)
valid_rows <- strtoi(rownames(geo_data_no_na))
model <- kmeans(geo_data_no_na, NUM_CLUSTERS)
data_with_clusters <- data.frame(geo_data_no_na, cluster = factor(model$cluster))
centers <- as.data.frame(model$centers)
smaller_sample <- data_with_clusters[sample(nrow(data_with_clusters), 2500, replace=F),]
map = get_map(location = c(lon = -78.4558138,lat =  -0.2324668), zoom = 11, maptype = 'satellite')
ggmap(map) + geom_point(data=smaller_sample, aes(x=x, y=y, color=cluster )) + geom_point()
require(sqldf)
info = sqldf("SELECT DISTINCT * FROM smaller_sample, tweets_depurated_noText WHERE smaller_sample.x = tweets_depurated_noText.longitude AND smaller_sample.y = tweets_depurated_noText.id_str")
result = sqldf("SELECT cluster, SUM(cluster) FROM info GROUP BY cluster ORDER BY SUM(cluster) DESC")
write.csv(file = "info_tweet.csv", x = info)
write.csv(file = "clusters_tweet.csv", x = result)
write.csv(file = "centers_tweet.csv", x = centers)
require(ggplot2)
require(ggmap)
require(rworldmap)
NUM_CLUSTERS = 20
geo_data <- data.frame(x=tweets_depurated_noText$id_str, y=tweets_depurated_noText$longitude)
geo_data_no_na <- na.omit(geo_data)
valid_rows <- strtoi(rownames(geo_data_no_na))
model <- kmeans(geo_data_no_na, NUM_CLUSTERS)
data_with_clusters <- data.frame(geo_data_no_na, cluster = factor(model$cluster))
centers <- as.data.frame(model$centers)
smaller_sample <- data_with_clusters[sample(nrow(data_with_clusters), 2500, replace=F),]
map = get_map(location = c(lon = -78.4558138,lat =  -0.2324668), zoom = 11, maptype = 'satellite')
ggmap(map) + geom_point(data=smaller_sample, aes(x=x, y=y, color=cluster )) + geom_point()
require(sqldf)
info = sqldf("SELECT DISTINCT * FROM smaller_sample, tweets_depurated_noText WHERE smaller_sample.x = tweets_depurated_noText.longitude AND smaller_sample.y = tweets_depurated_noText.id_str")
result = sqldf("SELECT cluster, SUM(cluster) FROM info GROUP BY cluster ORDER BY SUM(cluster) DESC")
write.csv(file = "info_tweet.csv", x = info)
write.csv(file = "clusters_tweet.csv", x = result)
write.csv(file = "centers_tweet.csv", x = centers)
require(ggplot2)
require(ggmap)
require(rworldmap)
NUM_CLUSTERS = 20
geo_data <- data.frame(x=tweets_depurated_noText$id_str, y=tweets_depurated_noText$longitude)
geo_data_no_na <- na.omit(geo_data)
valid_rows <- strtoi(rownames(geo_data_no_na))
model <- kmeans(geo_data_no_na, NUM_CLUSTERS)
data_with_clusters <- data.frame(geo_data_no_na, cluster = factor(model$cluster))
centers <- as.data.frame(model$centers)
smaller_sample <- data_with_clusters[sample(nrow(data_with_clusters), 2500, replace=F),]
map = get_map(location = c(lon = -78.4558138,lat =  -0.2324668), zoom = 11, maptype = 'satellite')
ggmap(map) + geom_point(data=smaller_sample, aes(x=x, y=y, color=cluster )) + geom_point()
require(sqldf)
info = sqldf("SELECT DISTINCT * FROM smaller_sample, tweets_depurated_noText WHERE smaller_sample.x = tweets_depurated_noText.id_str AND smaller_sample.y = tweets_depurated_noText.longitude")
result = sqldf("SELECT cluster, SUM(cluster) FROM info GROUP BY cluster ORDER BY SUM(cluster) DESC")
write.csv(file = "info_tweet.csv", x = info)
write.csv(file = "clusters_tweet.csv", x = result)
write.csv(file = "centers_tweet.csv", x = centers)
require(ggplot2)
require(ggmap)
require(rworldmap)
NUM_CLUSTERS = 20
geo_data <- data.frame(x=tweets_depurated_noText$id_str, y=tweets_depurated_noText$longitude)
geo_data_no_na <- na.omit(geo_data)
valid_rows <- strtoi(rownames(geo_data_no_na))
model <- kmeans(geo_data_no_na, NUM_CLUSTERS)
data_with_clusters <- data.frame(geo_data_no_na, cluster = factor(model$cluster))
centers <- as.data.frame(model$centers)
smaller_sample <- data_with_clusters[sample(nrow(data_with_clusters), 1000, replace=F),]
map = get_map(location = c(lon = -78.4558138,lat =  -0.2324668), zoom = 11, maptype = 'satellite')
ggmap(map) + geom_point(data=smaller_sample, aes(x=x, y=y, color=cluster )) + geom_point()
require(sqldf)
info = sqldf("SELECT DISTINCT * FROM smaller_sample, tweets_depurated_noText WHERE smaller_sample.x = tweets_depurated_noText.id_str AND smaller_sample.y = tweets_depurated_noText.longitude")
result = sqldf("SELECT cluster, SUM(cluster) FROM info GROUP BY cluster ORDER BY SUM(cluster) DESC")
write.csv(file = "info_tweet.csv", x = info)
write.csv(file = "clusters_tweet.csv", x = result)
write.csv(file = "centers_tweet.csv", x = centers)
View(result)
require(ggplot2)
require(ggmap)
require(rworldmap)
NUM_CLUSTERS = 20
geo_data <- data.frame(x=tweets_depurated_noText$id_str, y=tweets_depurated_noText$longitude)
geo_data_no_na <- na.omit(geo_data)
valid_rows <- strtoi(rownames(geo_data_no_na))
model <- kmeans(geo_data_no_na, NUM_CLUSTERS)
data_with_clusters <- data.frame(geo_data_no_na, cluster = factor(model$cluster))
centers <- as.data.frame(model$centers)
smaller_sample <- data_with_clusters[sample(nrow(data_with_clusters), 1000, replace=F),]
map = get_map(location = c(lon = -78.4558138,lat =  -0.2324668), zoom = 11, maptype = 'satellite')
ggmap(map) + geom_point(data=smaller_sample, aes(x=x, y=y, color=cluster )) + geom_point()
require(sqldf)
info = sqldf("SELECT DISTINCT * FROM smaller_sample, tweets_depurated_noText WHERE smaller_sample.x = tweets_depurated_noText.id_str AND smaller_sample.y = tweets_depurated_noText.longitude")
result = sqldf("SELECT cluster, COUNT(cluster) FROM info GROUP BY cluster ORDER BY COUNT(cluster) DESC")
write.csv(file = "info_tweet.csv", x = info)
write.csv(file = "clusters_tweet.csv", x = result)
write.csv(file = "centers_tweet.csv", x = centers)
View(result)
model$size
info = sqldf("SELECT * FROM smaller_sample, tweets_depurated_noText WHERE smaller_sample.x = tweets_depurated_noText.id_str AND smaller_sample.y = tweets_depurated_noText.longitude")
View(tweets_depurated_noText)
